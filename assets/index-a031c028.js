import{g as K,h as k,T as W,u as G,q as H,k as J,a5 as Q,L as X,W as Z,a as u,o as i,m as U,w as a,f as z,b as e,l as r,i as o,P as ee,c as y,F as w,d as T,K as S,a6 as le,a7 as ae,O as P,p as te,e as oe,_ as se}from"./index-7891c5ed.js";const de=V=>(te("data-v-f092dc72"),V=V(),oe(),V),ne={class:"card-header"},ue=de(()=>z("span",null,"就诊人管理",-1)),re={key:0,class:"visitors"},ie={key:1,class:"add"},ce=K({__name:"index",setup(V){let b=k([]),c=k(0),g=k([]),t=W({name:"",certificatesType:"",certificatesNo:"",sex:0,birthdate:"",phone:"",isMarry:0,isInsure:0,addressSelected:[],address:"",contactsName:"",contactsCertificatesType:"",contactsCertificatesNo:"",contactsPhone:""}),O=G(),_=H();J(()=>{C(),A(),_.query.type=="add"&&(c.value=1),_.query.type=="edit"&&(c.value=1)}),Q(()=>b.value,()=>{if(_.query.type=="edit"){c.value=1;let n=b.value.find(s=>s.id==_.query.id);console.log(n),Object.assign(t,n)}});const C=async()=>{let n=await X();n.code==200&&(b.value=n.data)},A=async()=>{let n=await Z();n.code==200&&(g.value=n.data)},B=()=>{q(),c.value=1},q=()=>{Object.assign(t,{id:null,name:"",certificatesType:"",certificatesNo:"",sex:0,birthdate:"",phone:"",isMarry:0,isInsure:0,addressSelected:[],address:"",contactsName:"",contactsCertificatesType:"",contactsCertificatesNo:"",contactsPhone:""})},Y=n=>{c.value=1,Object.assign(t,n)},j={lazy:!0,async lazyLoad(n,s){let h=(await le(n.data.value||"86")).data.map(p=>({label:p.name,value:p.value,leaf:!p.hasChildren}));s(h)}},D=async()=>{try{await ae(t),P({type:"success",message:t.id?"更新成功":"新增成功"}),_.query.type?O.back():c.value=0,C()}catch{P({type:"error",message:t.id?"更新失败":"新增失败"})}},L=()=>{C()};return(n,s)=>{const v=u("el-button"),h=u("Visitor"),p=u("el-divider"),m=u("el-input"),d=u("el-form-item"),I=u("el-option"),M=u("el-select"),f=u("el-radio"),x=u("el-radio-group"),R=u("el-date-picker"),N=u("el-form"),E=u("el-cascader"),F=u("el-card");return i(),U(F,{class:"box-card"},{header:a(()=>[z("div",ne,[ue,e(v,{onClick:B,class:"button",type:"success",icon:o(ee),size:"small"},{default:a(()=>[r("添加就诊人")]),_:1},8,["icon"])])]),default:a(()=>[o(c)==0?(i(),y("div",re,[(i(!0),y(w,null,T(o(b),(l,$)=>(i(),U(h,{onRemoveUser:L,onChange:Y,class:"item",key:l.id,user:l,index:$},null,8,["user","index"]))),128))])):S("",!0),o(c)==1?(i(),y("div",ie,[e(p,{"content-position":"left"},{default:a(()=>[r("就诊人信息")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"}},{default:a(()=>[e(d,{label:"用户姓名"},{default:a(()=>[e(m,{placeholder:"请你输入用户姓名",modelValue:o(t).name,"onUpdate:modelValue":s[0]||(s[0]=l=>o(t).name=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"证件类型"},{default:a(()=>[e(M,{placeholder:"请你选择证件的类型",style:{width:"100%"},modelValue:o(t).certificatesType,"onUpdate:modelValue":s[1]||(s[1]=l=>o(t).certificatesType=l)},{default:a(()=>[(i(!0),y(w,null,T(o(g),l=>(i(),U(I,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"证件号码"},{default:a(()=>[e(m,{placeholder:"请你输入证件号码",modelValue:o(t).certificatesNo,"onUpdate:modelValue":s[2]||(s[2]=l=>o(t).certificatesNo=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"用户性别"},{default:a(()=>[e(x,{modelValue:o(t).sex,"onUpdate:modelValue":s[3]||(s[3]=l=>o(t).sex=l)},{default:a(()=>[e(f,{label:1},{default:a(()=>[r("男")]),_:1}),e(f,{label:0},{default:a(()=>[r("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"出生日期"},{default:a(()=>[e(R,{"value-format":"YYYY-MM-DD",type:"date",placeholder:"请你选择日期",modelValue:o(t).birthdate,"onUpdate:modelValue":s[4]||(s[4]=l=>o(t).birthdate=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码"},{default:a(()=>[e(m,{placeholder:"请你输入用户手机号码",modelValue:o(t).phone,"onUpdate:modelValue":s[5]||(s[5]=l=>o(t).phone=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{"content-position":"left"},{default:a(()=>[r("建档信息（完善后部分医院首次就诊不排队建档）")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"}},{default:a(()=>[e(d,{label:"婚姻状况"},{default:a(()=>[e(x,{modelValue:o(t).isMarry,"onUpdate:modelValue":s[6]||(s[6]=l=>o(t).isMarry=l)},{default:a(()=>[e(f,{label:1},{default:a(()=>[r("已婚")]),_:1}),e(f,{label:0},{default:a(()=>[r("未婚")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"自费/医保"},{default:a(()=>[e(x,{modelValue:o(t).isInsure,"onUpdate:modelValue":s[7]||(s[7]=l=>o(t).isInsure=l)},{default:a(()=>[e(f,{label:1},{default:a(()=>[r("自费")]),_:1}),e(f,{label:0},{default:a(()=>[r("医保")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"当前的住址"},{default:a(()=>[e(E,{props:j,modelValue:o(t).addressSelected,"onUpdate:modelValue":s[8]||(s[8]=l=>o(t).addressSelected=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"详细地址"},{default:a(()=>[e(m,{placeholder:"请你输入用户详细地址",modelValue:o(t).address,"onUpdate:modelValue":s[9]||(s[9]=l=>o(t).address=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{"content-position":"left"},{default:a(()=>[r("联系人信息（选填）")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"},"label-width":"80"},{default:a(()=>[e(d,{label:"用户姓名"},{default:a(()=>[e(m,{placeholder:"请你输入用户姓名",modelValue:o(t).contactsName,"onUpdate:modelValue":s[10]||(s[10]=l=>o(t).contactsName=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"证件类型"},{default:a(()=>[e(M,{placeholder:"请你选择证件的类型",style:{width:"100%"},modelValue:o(t).contactsCertificatesType,"onUpdate:modelValue":s[11]||(s[11]=l=>o(t).contactsCertificatesType=l)},{default:a(()=>[(i(!0),y(w,null,T(o(g),l=>(i(),U(I,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"证件号码"},{default:a(()=>[e(m,{placeholder:"请你输入证件号码",modelValue:o(t).contactsCertificatesNo,"onUpdate:modelValue":s[12]||(s[12]=l=>o(t).contactsCertificatesNo=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码"},{default:a(()=>[e(m,{placeholder:"请你输入用户手机号码",modelValue:o(t).contactsPhone,"onUpdate:modelValue":s[13]||(s[13]=l=>o(t).contactsPhone=l)},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(v,{type:"primary",size:"default",onClick:D},{default:a(()=>[r("提交")]),_:1}),e(v,{type:"primary",size:"default",onClick:q},{default:a(()=>[r("重写")]),_:1})]),_:1})]),_:1})])):S("",!0)]),_:1})}}});const me=se(ce,[["__scopeId","data-v-f092dc72"]]);export{me as default};
