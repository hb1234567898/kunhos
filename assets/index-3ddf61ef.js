import{g as G,h as v,T as K,k as L,U as W,W as X,a as n,o as u,c as b,b as a,w as e,i as o,m as F,l as p,t as U,K as V,F as Z,d as J,j as Q,O as x,X as Y,p as ee,e as te,f as i,_ as le}from"./index-7891c5ed.js";const ae="/assets/auth_example-9b25c4a0.png",_=h=>(ee("data-v-714eccb1"),h=h(),te(),h),oe=_(()=>i("div",{class:"card-header"},[i("h1",null,"实名信息")],-1)),se=_(()=>i("div",{class:"tip"},[i("p",{style:{color:"#7f7f7f"}},[i("svg",{t:"1696767199259",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2912",width:"16",height:"16"},[i("path",{d:"M512 993.882353C245.850353 993.882353 30.117647 778.149647 30.117647 512S245.850353 30.117647 512 30.117647s481.882353 215.732706 481.882353 481.882353-215.732706 481.882353-481.882353 481.882353z m0-60.235294c232.869647 0 421.647059-188.777412 421.647059-421.647059S744.869647 90.352941 512 90.352941 90.352941 279.130353 90.352941 512s188.777412 421.647059 421.647059 421.647059z",fill:"#707070","p-id":"2913"}),i("path",{d:"M459.956706 763.572706c-5.12-34.665412-1.204706-105.893647 0-120.530824l5.300706-165.49647c0.963765-15.36-7.981176-11.444706-14.125177-8.553412-29.816471 14.215529-64.602353 40.357647-64.602353 40.357647s21.172706-57.283765 41.592471-81.227294c15.088941-21.052235 47.465412-49.182118 71.258353-51.410824 28.039529 0.602353 42.405647 4.848941 40.05647 74.842353 0 0-4.698353 215.100235-0.662588 252.596706 4.096 11.956706 43.339294-15.209412 48.850824-19.516235 5.541647-4.306824 56.32-50.176 56.32-50.176S602.352941 759.868235 522.300235 787.787294c-28.521412 9.938824-58.066824 5.150118-62.373647-24.214588z",fill:"#707070",opacity:".99","p-id":"2914"}),i("path",{d:"M503.717647 285.364706m-52.495059 0a52.495059 52.495059 0 1 0 104.990118 0 52.495059 52.495059 0 1 0-104.990118 0Z",fill:"#707070","p-id":"2915"}),i("path",{d:"M0 0h1024v1024H0z",fill:"#707070","fill-opacity":"0","p-id":"2916"})]),p(" 完成实名认证后才能添加就诊人，正常进行挂号，为了不影响后续步骤，建议提前实名认证。 ")])],-1)),re=_(()=>i("div",{class:"cell-item"}," 用户名 ",-1)),ie=_(()=>i("div",{class:"cell-item"}," 证件类型 ",-1)),ce=_(()=>i("div",{class:"cell-item"}," 证件号码 ",-1)),ne=_(()=>i("img",{style:{width:"100%",height:"100%"},src:ae,alt:""},null,-1)),de=["src"],ue=G({__name:"index",setup(h){let d=v({}),N=v([]),r=K({certificatesNo:"",certificatesType:"",certificatesUrl:"",name:""}),f=v(!1),T=v(),w=v();L(()=>{C(),S()});const C=async()=>{let s=await W();s.code==200&&(d.value=s.data)},S=async()=>{let s=await X();s.code==200&&(N.value=s.data)},E=()=>{x({type:"error",message:"图片只能上传一张"})},I=(s,t,l)=>{w.value.clearValidate("certificatesUrl"),r.certificatesUrl=s.data},q=s=>{f.value=!0},D=s=>{r.certificatesUrl=""},M=()=>{T.value.clearFiles(),Object.assign(r,{certificatesNo:"",certificatesType:"",certificatesUrl:"",name:""})},z=async()=>{await w.value.validate();try{await Y(r),x({type:"success",message:"认证成功"}),C()}catch{x({type:"error",message:"认证失败"})}},B={name:[{required:!0,validator:(s,t,l)=>{/^[\u00B7\u3007\u3400-\u4DBF\u4E00-\u9FFF\uE000-\uF8FF\uD840-\uD8C0\uDC00-\uDFFF\uF900-\uFAFF]+$/.test(t)?l():l(new Error("请输入正确中国人的名字"))}}],certificatesType:[{required:!0,validator:(s,t,l)=>{t=="10"||t=="20"?l():l(new Error("请选择证件的类型"))}}],certificatesNo:[{required:!0,validator:(s,t,l)=>{let y=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4}$/,g=/^\d{9}$/;y.test(t)||g.test(t)?l():l(new Error("请输入正确的身份证或者户口本的号码"))}}],certificatesUrl:[{required:!0,validator:(s,t,l)=>{t.length?l():l(new Error("请上传证件照图片"))}}]};return(s,t)=>{const l=n("el-descriptions-item"),y=n("el-descriptions"),g=n("el-input"),m=n("el-form-item"),P=n("el-option"),j=n("el-select"),A=n("el-upload"),H=n("el-dialog"),k=n("el-button"),O=n("el-form"),R=n("el-card");return u(),b("div",null,[a(R,{class:"box-card"},{header:e(()=>[oe]),default:e(()=>[se,o(d).authStatus==1?(u(),F(y,{key:0,class:"margin-top",column:1,border:"",style:{margin:"10px auto"}},{default:e(()=>[a(l,{width:10,"label-align":"center"},{label:e(()=>[re]),default:e(()=>[p(" "+U(o(d).name),1)]),_:1}),a(l,{width:10,"label-align":"center"},{label:e(()=>[ie]),default:e(()=>[p(" "+U(o(d).certificatesType=="10"?"身份证":"户口本"),1)]),_:1}),a(l,{width:10,"label-align":"center"},{label:e(()=>[ce]),default:e(()=>[p(" "+U(o(d).certificatesNo),1)]),_:1})]),_:1})):V("",!0),o(d).authStatus==0?(u(),F(O,{key:1,model:o(r),ref_key:"form",ref:w,rules:B,style:{width:"50%",margin:"20px auto"},"label-width":"80"},{default:e(()=>[a(m,{label:"用户姓名",prop:"name"},{default:e(()=>[a(g,{placeholder:"请输入用户名",modelValue:o(r).name,"onUpdate:modelValue":t[0]||(t[0]=c=>o(r).name=c)},null,8,["modelValue"])]),_:1}),a(m,{label:"证件类型",prop:"certificatesType"},{default:e(()=>[a(j,{style:{width:"100%"},label:"请输入证件类型",modelValue:o(r).certificatesType,"onUpdate:modelValue":t[1]||(t[1]=c=>o(r).certificatesType=c)},{default:e(()=>[(u(!0),b(Z,null,J(o(N),(c,$)=>(u(),F(P,{label:c.name,value:c.value,key:$},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"证件号码",prop:"certificatesNo"},{default:e(()=>[a(g,{placeholder:"请输入证件号码",modelValue:o(r).certificatesNo,"onUpdate:modelValue":t[2]||(t[2]=c=>o(r).certificatesNo=c)},null,8,["modelValue"])]),_:1}),a(m,{label:"上传证件",prop:"certificatesUrl"},{default:e(()=>[a(A,{"list-type":"picture-card",ref_key:"upload",ref:T,"on-remove":D,"on-preview":q,limit:1,"on-success":I,"on-exceed":E,action:"/api/oss/file/fileUpload?fileHost=userAuah"},{default:e(()=>[ne]),_:1},512),a(H,{modelValue:o(f),"onUpdate:modelValue":t[3]||(t[3]=c=>Q(f)?f.value=c:f=c)},{default:e(()=>[o(r).certificatesUrl?(u(),b("img",{key:0,"w-full":"",style:{width:"100%",height:"100%"},src:o(r).certificatesUrl,alt:"Preview Image"},null,8,de)):V("",!0)]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:e(()=>[a(k,{type:"primary",onClick:z},{default:e(()=>[p("提交")]),_:1}),a(k,{onClick:M},{default:e(()=>[p("重写")]),_:1})]),_:1})]),_:1},8,["model"])):V("",!0)]),_:1})])}}});const he=le(ue,[["__scopeId","data-v-714eccb1"]]);export{he as default};
